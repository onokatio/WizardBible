x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x
x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x

--- 第17章: 最近のアセンブリ言語本事情 ---

著者：eagle0wl

x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x
x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x


■0x01.) はじめに

　アセンブリ言語・機械語解説本が人気のようで、最近のコンピュータ書籍界隈
ではアセンブリ言語・機械語・CPUの仕組みなどコンピュータの本質を解説した書
籍が数多く出ており、もはや一大ムーブメントといって良いほどの盛り上がりを
見せている模様。
　しかし、なぜ今になってこのような書籍が増えているのでしょうか。昔は自分
でプログラムを作るものであったことに加え、CPUの性能が非常に低かったことか
らその性能を100%引き出せるアセンブリ言語の知識は必要不可欠でした。そのた
め当時は「コンピュータを使える」と自称するにはコンピュータの動作原理を熟
知する必要がありましたが、現在では既存のソフトウェアが使いこなせれば「コ
ンピュータを使える」といった意味に成り下がっています。
　この傾向をコピープロテクト破りに当てはめると、昔はとにかくプログラムを
逆アセンブルし、場合によってはコピーのためにデバイスドライバを自作すると
いった「スキルの蓄積を必要とするテクニック」を駆使してプロテクトを破って
いました。ところが今はというと「このドライブとこのライティングソフトを組
み合わせれば焼ける」といった方法が主流で、これにはスキルを一切必要としま
せん。それを悪用厳禁とか言って煽っているアホな雑誌が巷に溢れているわけで
すが。
　これを受けて「今のユーザーは軟弱になった」と切り捨てるのはたやすいです
が、OSなどが大規模複雑化したことで個人の理解を超えるものとなってしまった
ことと、わざわざコンピュータの動作原理を学習しなくても使えるようになった
ことも原因のひとつとして考えられます。高性能なパソコンが身近になったから
といって、エンジニアのスキルもそれに合わせて上がらない（それどころか落ち
ているという指摘もある）のが実情です。
　こうした傾向から「なぜプログラムは動くのか」といった疑問に応える基礎技
術を見直そうという動きが起こるのは自然な流れであり、これが現在の出版ブー
ムに繋がっているといえます。
　筆者ならば、近年発売された書籍からは以下の3冊を推薦します（敬称略）。

・『プログラムはなぜ動くのか』（矢沢久雄、日経BP）
・『はじめて読むPentium マシン語入門』（蒲地輝尚・水越康博、アスキー）
・『CPUの創りかた』（渡波郁、毎日コミュニケーションズ）


■0x02.) あの本の続編が性懲りもなく出た！

　この類の本が売れるとわかると悪書も出回るのが世の常であります。今回ご紹
介するのは『いまどきのアセンブラの教科書』（毎日コミュニケーションズ）。
この本は『いまどきのアセンブラプログラミング』（毎日コミュニケーションズ）
の続編にあたりますが、前作はタイトルに「プログラミング」の名を冠しておき
ながら、その実体はゲーム改造の解説本というコンピュータ書籍における新たな
スタイルを提案。Amazon.comのブックレビューでも「書くのに3日もかかってない
と思われる内容」「開いた口が塞がらなくなる事請け合い」「こういう本が売り
に出されること自体悲しい」「4半世紀の間買ったPCの本の中でここまでひどく
はずしたのは初めて」「読むに値しません」「こんな詐欺まがいな商品は買う価
値もない」といった賞賛の声で溢れかえっています。これは筆者が属するソフト
クラック界隈でも話題になり、この本をチェックした人の書き込みを見ると、こ
こでも「作者はスタックの構造すら理解していない」「でじたるとらべしあのパ
クリ」「パクリじゃない部分はデタラメ過ぎて読むに値しない」と大絶賛。

○でじたるとらべしあ
　ゲーム改造ツール「うさみみハリケーン」の作者であるうさぴょん氏のゲーム
改造情報サイト。
→　http://gamereverserz.cjb.net/

　そのような前作の期待を背負って『いまどきのアセンブラの教科書』が世に出
されたわけでありますが、前作の評判を聞いていた私はこの本を軽やかにスルー
するつもりでした。しかし、筆者が運営するウェブサイト『どーもeagle0wlです
（仮）』の掲示板に、私が作成したcrackme（ソフトクラック練習用プログラム）
が無断掲載されている疑惑のタレコミが書き込まれ（これについては後述）、さ
すがにこの目で確認するべく購入・読了。


■0x03.) わからないのにパクるとこうなる

　いやはや実に香ばしい。『いまどきのアセンブラの教科書』は、今まで読んだ
技術本の中でランクをつけるならばダントツのワースト。本書の元ネタと思われ
るものは以下の通り。

・『クラッカー・プログラム大全』（Kracker's & BEAMZ、データハウス）
・『解析魔法少女美咲ちゃん マジカル・オープン！』（やねう解析チーム、秀和
システム）
・「でじたるとらべしあ」（http://gamereverserz.cjb.net/）

　ここで筆者の「パクり」に対する認識を表明しておくと、ソフトクラックに関
してはニッチな分野であり文献も少ないため若干のパクりは仕方ないものと考え
ています。その元ネタをかみ砕いて自らの知識として取り込み、それに対し何ら
かのアドバンテージを付加することができるかが重要であると考えています。
　この視点に立って読み進めていくと、著者はアセンブリ言語・ソフトクラック
の知識を全く持ち合わせていないのではないかと思いたくなるほどの支離滅裂っ
ぷりが本書全体に広がっており、ひとつのワールドの形成を確認できます。まる
で某ランナーで中途半端な知識を得た教えたがりが、無垢な初心者に穴だらけの
説教を垂れるような。
　それでは本題に入りましょう。まずは本書の前書きに相当する「この本の使い
方」をチェック（初版第一刷を参考）。

●[p3　この本の使い方]
>この本を利用して、解析しているうちに、次第に言語は身につき、
>あなたはアセンブラを組めるようになっていると信じています。

　アセンブラ、アセンブリ言語、アセンブル、以上3つの用語は区別して用いられ
るべきです。アセンブリ言語の意味で「アセンブラ」と呼ぶこともありますが、
これは英単語としては間違いであり、通常は区別して用いられます。
　ここでの引用では、「アセンブリ言語を用いてプログラムを組めるようになる」
のか、「ml.exe(MASMの場合)のようなものが組めるようになる」のかどちらなの
かという点で誤解が生じています。これは別章でも散見され、OllyDbgを「アセン
ブラデバッガー」と解説。それだけならまだしも…。

●[p198　デバッグとはそもそも何なのか？]
>アセンブラデバッガーとは文字通りアセンブラでデバッグを行うツール

　の記述を見つけたときは脳みそトロトロになりました。この時点で本書の程度
が知れていますね。しばらく読み進めていると驚きの記述が。

●[p26　低級言語と高級言語]
>　低級言語と高級言語の違いは、「マルチスレッド」に対応している
>言語かということ。マルチスレッドとは…（以下略）

　これを見たとき私は目を疑った。しかも直後にマルチスレッドについて解説し
ていたため、もしかしてそういう解釈をする場合もあるのでは…とパラレルワー
ルドの存在を疑ってしまった。しかもその直後では、

●[p26　低級言語と高級言語]
>マルチスレッドに対応していない「Basic」やアセンブラなどは
>低級言語に分類される。

　Basicを低級言語に認定。これは本物だ。その舌の根の乾かない4ページ後には

●[p30　高級言語と比べてのアセンブラの欠点]
>　アセンブラの持つ欠点も「C/C++」や「Basic」などの高級言語の
>持つ欠点も、どちらも一長一短な部分だ。

　と、今度は高級言語に認定。一体どっちなのよ。

　第三章では、プロセスメモリエディタTSearchを用いてメモリパッチの方法と、
メモリパッチャのプログラム作成の解説がある。が、ここでの使用言語はなぜか
Visual Basic。「アセンブラの教科書」なんだからせめてＣ言語で書き直すぐら
いのことはして欲しかったと思ったが、この時点で諦観に変わる。もうここから
は面倒くさいのでどんどん羅列していきます。

●[出版社からのコメント]
>本書は「解析可」なGNUプログラムを例にアセンブラ、
>Windowsプログラミングを学び、

　とあるが、「解析可」なGNUプログラムはどこにも見あたらない。第二章の「実
践！Resource Hackerで海外ツールを日本語化する」で日本語化対象として取り上
げている『Family KeyLogger』は、Symantecがスパイウェア認定しているソフト
ウェアであるから恐れ入ります。

http://www.symantec.com/region/jp/avcenter/venc/data/spyware.familykeylog.html

　初心者向けの「教科書」で用いられる題材とは思えないですね。しかも『Fami
ly KeyLogger』はGNUプログラムでもオープンソースになっているわけでもなく、
フリーソフトウェアでもない。本書のキャプチャをよく見ると、メニューに「Re
gistration」の文字列が…。そう、シェアウェアであります。

　プログラム書き換えを伴う日本語化の例として用いられている「SuperScan 3.
0」（p69）もGNUライセンスでは配布されていません。

http://www.snapfiles.com/get/superscan.html

　第五章「プログラム改造のためにデバッガーを活用する」では、OllyDbgの持つ
「各機能の使い方」の解説に終始しており、実際にソフトウェアを解析する例は
ないというヘタレっぷり。もう完全にヤケクソですね。

　第六章「解析に行き詰まった時のTips」では、2ページほどのTipsが30種挙げら
れていますが、まさにパクリの見本市状態。前述した『クラッカー・プログラム
大全』『解析魔法少女美咲ちゃん』に依拠している箇所が多数見られました。読
み進めてみると、元ネタをまったく理解していないうえ具体的な操作方法がまっ
たく示されておらず、まったくもって意味不明であり理解不能であり実践不能。

　その最たる例をひとつ示します。p244の「No.02 解析したいソフトを作成した
ソフトを探る」では『クラッカー・プログラム大全』を下敷きにしていると思わ
れるいわゆる「VBセオリー」も紹介されています。しかし、

●[p244　No.02 解析したいソフトを作成したソフトを探る]
>　「VBセオリー」はVB4からVB6で活用されていて、各バージョン
>のVBのDLLで用いられる文字列の比較命令を利用している。命令を
>バイナリエディタで見ると、バージョンが同じなら常に同じ形をしている。
>バイナリエディタ上から検索を行って命令を行っている箇所を
>見つけることができるため、解析の手間を大幅に省くことができる。
（中略）
>文字列比較を行っている箇所を見つけ出すことができれば、そのまま
>バイナリエディタ上で命令をNOPに書き替えるなどして、文字列比較を
>行わない状態にすることが出来る。

　他のプログラムと共用することを前提としているDLLを、バイナリエディタで書
き替えるとマズイということぐらい分からないのだろうか…。それに「VBセオリ
ー」でNOP命令に置き換えるような操作は行いません。

●[p294　No.25 圧縮された実行ファイルの圧縮を解除する]
　ここでは「ダンプしたファイルはIATの再構築を行う必要がある」との記述があ
ります。ここで前触れもなくIATという略称が登場しているが、正式名称・解説は
一切無し。
　ちなみに、IATはImport Address Tableの略。詳しくはケンジさんがWizard Bi
bleに書いたvol.15の第5章「リバースエンジニアリング」を参照して下さい。

>IATの再構築は「Revirgin」「Importe REConstrucotr」といったツールを
>使えば自動で行えるので難しいことはない
（綴りは原文ママ）

　との記述もあるが、上記2つのツールの解説はない。

　ここまでずらずらっと気になる点を列挙しましたが、下手すると公式サイトの
誤植表よりも詳しくなってしまったかもしれません。すでに買ってしまった方は、
参考にしてみてはどうでしょうか。


■0x04.) crackmeの無断掲載疑惑について

　さて、本書を読んだきっかけは前述したとおり、私が作成したcrackmeが無断掲
載されている疑惑のタレコミを受けたことに端を発しています。
　実は以前、ア○キーから本が出るということでcrackmeの収録許可依頼が来たの
ですが、その時は「あのア○キーがクラック本出すのかよ！」と驚いたモノです。
ア○キーが出すならということで許可メールを返信しましたが、この時点で気づ
くべきだったのです。他人が作ったcrackmeに頼ったクラック本ってどうなのよ、
ということに。
　適当に月日が流れたところで飛び込んできたのが前述のタレコミであり、その
本の奥付を見ると、許可依頼のメールを出した方の名前がある。な〜んだそうい
うことか〜、ってふざけんな。そんなこと聞いてないぞ。
　とまあ、どういうことだメールを送信したところ、その返事はすぐに返ってき
ました。要約すると「一度許可くれたんだからＯＫと解釈」「再配布は自由とい
う記載があったから」だそうな。ちなみに私のマニュアルの注意書きにはこう書
いています。

-----
●再配布
ご自由にどうぞ。事後報告でもかまいません。
-----

　crackmeを出した当時は、雑誌や書籍に収録されるとは思ってもいなかったので
簡潔に書きましたが、雑誌への収録って再配布なんだろうか。まあ、フリーで配
布している以上私に実害が生じるわけでもないので（著作権法に触れているかも
知れないが）別にどーってことないのですが、なんか腑に落ちませんね。ただ、
コレに関して管を巻いても何も始まらないので、そういうもんかと割り切るよう
にしています。実害がない以上声を張り上げてもどうしようもないのが実情です。
そういうもんです。で、他のライターから聞いたのですが、この本の著者の一人
は某ランナーのライターでもあるとのこと。なるほど納得。


■0x05.) 最後に

　以上、非常にキツイレビューとなってしまいましたが、決して嫌がらせの意図
はありません。私と致しましては、某ランナーで厨房を煽りつつ一から知りたい
一般の読者はスルーできても、ゲーム改造・クラック系住民が総出でドン引きす
るような、そういう格調の高い本を出し続けていってほしいと思うわけなんです
よ。ネタになるし。
　しかし、売れ筋ランキングを見るとどうやら売れている模様。私の近所の書店
でも前作と合わせて平積みになっていたし、そのマーケッティングのセンスには
素直に感心します。ホントに。しかし、そうやって無垢な初心者に間違った知識
を植え付けるということには罪悪感を感じないのでしょうか。これだけは如何と
もし難いですが、素晴らしい本を出してイット業界の発展に寄与することも大事
だけど、やっぱり金儲けが肝心だよねと割り切るように、是非行き着くところま
で行ってみて欲しいと思います。
