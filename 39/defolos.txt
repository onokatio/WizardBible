x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x
x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x

--- 第○章: mixiのアカウント登録における携帯アドレスの要求への対処法 ---

著者：Defolos

x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x
x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x


■0x01.) はじめに

　つい先日、mixiのアカウントを取ろうと考えました。いや、すでに2つほどアカ
ウントは持ってるわけですが、気まぐれでもうひとつほしいなと思ったのです。
で、Gmailのアカウントとって招待状を送ったのですが、なんとビックリ！　携帯
アドレスを入力する欄が増えてるではありませんか！　昔はこんなのいらなかっ
たぞー！！　ってなわけで、携帯のアドレスを入れることなく新規登録する方法
を考えました。
　たぶんこのレポートで紹介する方法は「え！？　いまさら？」ってぐらいあり
きたりな方法なので、知ってる方は多いと思います。まぁ、読んでいただければ
幸いです。


■0x02.) mixiとは

　mixi（http://mixi.jp/）は言わずと知れた日本の大手SNSサイトです。Wizard
Bible読者の方もアカウントをお持ちの方は多いと思います。mixiは招待制という、
すでにアカウントを持っている人物から招待状をもらうことでアカウント登録が
可能となるシステムをとっているのですが、実はここ最近、mixiのアカウントを
取得するのが難しくなってきています。原因である携帯アドレスの必須化につい
ては後述することにしますが、mixi社がこのような対応を行うのは、複数アカウ
ントの取得によるイタズラの横行に起因します。他者を装うことでコメントやコ
ミュニティへの書き込みなどで無責任な発言を行い、そのままアカウントごと消
去する輩が増えたことによって、mixi社は登録時のハードルを上げる対応を行っ
たのです。この状況下でのmixi社の対処は妥当な判断といえたでしょう。しかし、
その対処によってアカウントの取得が不可能となった善意のユーザも存在するの
です。


■0x03.) 携帯アドレス必須化について

　上記で述べましたように、登録時のハードルとしてmixi社は携帯電話のアドレ
スを必須とする方策をとりました。携帯電話は製造番号を取得することができ、
その番号を識別子とすればひとりで複数アカウントを取得しようとしているかど
うか判別することができます。これによってひとり1アカウントに抑えようという
のがmixi社の狙いでした。

●問題点

　携帯アドレスの必須化は一見問題なく複数アカウントの取得を阻止できるよう
に思えます。しかし、これには携帯電話の個人的な所持が必須条件となります。
つまり、携帯電話を持っていないユーザや、一度登録したがなんらかの事情で退
会したユーザ、携帯電話以外の情報端末を利用しているユーザはmixiのアカウン
トを取得することが不可能なのです。たとえばWillcome端末は携帯とは認識され
ず、Willcomeしかもっていないユーザはmixiへの入会ができないということにな
ってしまいます（対処される予定のようです）。


■0x04.) 抜け道

　携帯アドレスの必須化には実は抜け道があります。今回の携帯アドレス必須化
が適応できるのは、ひとりにつきひとつの携帯電話を所持しているという前提の
もと成り立ちます。つまり、人口のほとんどが携帯を所持している日本以外では、
この対応ではマズイということになります。しかしながら、国際化を掲げるmixi
にとって日本以外の国から登録ができないというのは問題となります。そこで、
mixi社は海外からの登録に限って携帯のアドレスを要求しないようにしているの
です。今回はこの抜け道を利用して、コストフリーでmixiへの登録を行ってみま
しょう。


■0x05.) Gmailの取得

　mixiに登録するには最低でもPC用のメールアドレスが必要です。ですので、ま
ずはメールアドレスを取得する必要があります。ここではGoogle社が提供するメ
ールサービスであるGmailを利用してアカウントを取得します。
　はじめにGmailのWebサイト（http://www.google.co.jp/）へアクセスしてくだ
さい。Webページの上部ヘッダーに「Gmail」というリンクがありますので、クリ
ックしてください。すでにアカウントをお持ちの場合は次の「Proxyについて」を
お読みください。まだGmailのアカウントが無い場合は、右側の「アカウント登録」
というリンクをクリックし、適当な名前を設定して登録してください。
　登録ができましたら、次の「Proxyについて」をお読みください。


■0x06.) Proxyについて

　今回の要点は海外からの接続に限り携帯アドレスの入力を要求しないという点
にあります。つまり、日本にいながら海外から接続しているように見せかければ、
携帯のアドレスはいらないということになります。そこで、これを実現するのが
Proxyという仕組みです。

●Proxyの目的

　ネットをしていてProxyという言葉を聞いたことがある方も多いと思います。よ
く掲示板などでは「身元を隠す」ためのツールだと勘違いされた方も間々見かけ
ますが、本来はそのようなものではありません。Proxyとは通信における情報量を
削減するために、情報を一時的に保存しておくサーバのことです。たとえば、日
本からブラジルのWebサーバにあるページを閲覧したいとします。はじめて閲覧す
るときは当然ブラジルのサーバにリクエストを出して、ページを転送してもらわ
なければなりません。

[Japan]--------------request----------------------->[Braasil]
       <-------------responce-----------------------

　しかし、何度も同じページを見るとすれば、その都度地球の反対側まで電気信
号を送りつけるのは大きな無駄です。頻繁に閲覧するなら、日本とブラジルの中
間にあるアメリカのサーバにデータを保存しておき、そこにリクエストを出して
閲覧したほうが時間的にもネットワークを伝わる情報量的にもお得です。つまり、
日本とブラジルの仲介としてアメリカのProxyサーバを利用すれば、ブラジルのサ
ーバに更新があるまで、日本とアメリカ間の通信で情報が得られることになるの
です。

*First requesting
[Japan]------request--->[U.S.A.]-----request-------->[Braasil]
       <----responce----[Store ]<----responce--------

*Second requesting
[Japan]------request--->[U.S.A.]                     [Braasil]
       <----responce----[Store ]

　このように、情報を一時的に貯めておき、通信量を抑えるための仕組みをProx
yと言います。

●匿名化への応用

　Proxyの動作としては上記の通りですが、この特徴を応用することで、掲示板へ
の匿名書き込みが可能となります。ブラジルのWebサーバにおかれた掲示板（掲示
板もWebサービスのひとつ）から見ると、リクエストを出しているのはアメリカの
ように見えます。しかし、実際は日本からのリクエストの仲介を行っていますの
で、実際に操作を行っているのは日本のPCです。このように、Proxyは一見すると
接続元を変更できているように見えるの特徴も持ち合わせています。これが俗に
言われるProxyによる匿名化の原理です。もちろんアメリカのProxyサーバには、
日本のPCからリクエストがあったことが記録されるわけですので、厳密な意味で
の匿名化はありえません。あくまでも時間稼ぎに使えるというわけです。中には
まともに記録をとらず、匿名化のためだけにProxyサーバを稼動させている人もい
るにはいるのでしょうが・・・

●海外からの接続に見せる

　さて、上記の例ではブラジルのWebサーバから見て接続元はアメリカに見えると
述べました。これと同じことがmixiでも可能です。アメリカのProxyを仲介として
mixiへ接続すれば、日本国内にいながら、アメリカからの接続としてmixiを利用
できるのです。この場合はProxyの本来の目的である情報量の軽減とはまるっきり
逆に、アメリカまで遠回りして情報を得ることになりますので、直接リクエスト
を出すより格段に遅くなります。とは言え、これでmixiには海外から接続してい
るように見せることができるのです。


■0x07.) 登録手順

1.招待状の発行

　知人から招待状をもらうか、自分で招待状を発行してください。招待状は先ほ
ど取得したGmailのメールアドレスへ送ります。

2.メールの閲覧

　Gmailへ入り、送られた招待状メールを見てください。中ほどに新規登録のため
のURLがありますが、現段階ではクリックせず、次のステップへ進んでください。

3.Proxyの適用

　Proxyサーバは日々消えたりできたりを繰り返しています。ですので、ProxyFo
rest(http://www.proxyforest.com/)などを参考に利用可能なものを探してくださ
い。今回はProxyForestを例に説明します。ProxyForestのページの「ProxyLixt」
をクリックすると次のようなリストが表示されます。

-----
IPAddress:Port      Country   Anonymous   Time     Rank
80.48.41.11:8080    PL           --       7,644    E
61.143.61.78:5661   CN        Anonymous   3,588    A+
80.74.160.55:80     CS           --       14,165   E
...
-----

　IPAddress:Portの部分はProxyのIPアドレスとポート番号です。両者は「:」で
区切られています。CountryはProxyサーバが置かれている国の名前です。日本は
JPであらわすことになっていますので、JPとかかれたもの以外を選択してくださ
い。Timeは反応時間の平均です。この値ができるだけ小さいものを選ぶようにし
てください。3,000ぐらいでも1ページ表示するのに20秒近くかかることが多いの
で、反応時間が大きいものはほとんど利用できないと考えて差し支えないと思い
ます。Rankは信頼度ですが、あまり考えなくても良いです。
　このリストの中から適当なものを選びます。次にそのProxyを仲介するようにブ
ラウザを設定します。FireFoxの場合はメニューの「ツール」→「オプション」→
「詳細」→「ネットワーク」と進みます。「接続設定」をクリックし「インター
ネット接続」ウィンドウを開きます。「手動でプロキシを設定する」にチェック
を入れ「HTTPプロキシ」の部分に先ほど選んだProxyのIPアドレスを、「ポート」
の部分にポート番号を入れます。ほかの部分は空白にし「OK」をクリックします。
　これでProxyを仲介してWebサーバにリクエストを発行するようになりました。
これ以後の反応はかなり遅くなりますので、気長に作業を進めてください。

4.招待状メールのURLをクリック

　Gmailに送られてきた招待状メールを開き、中ほどの新規登録へのURLを押して
ください。非常に時間がかかりますが、根気よく待ってください。しばらくする
と登録情報を入力するように言われますが、このとき携帯アドレスを入力する欄
が消えているはずです。もし携帯アドレスを入れる欄があったなら、一度ブラウ
ザを終了させてからもう一度やり直してください。それでもダメなら、ほかのPr
oxyを使って同じことを行ってください。

5.登録情報を入力

　適当な情報を入れておきましょう。名前とか本名を入れていると、mixiサーバ
がクラックされたときに危ないので、できるだけハンドルネームを使ったほうが
良いです。ただし、所在地は海外にしておいたほうが無難かと思います。この情
報は後から変えられるので、適当でも大丈夫です。

6.登録ボタンを押す

　一番下にある登録ボタンをしてください。Proxyを通してますので、反応までか
なりの時間がかかります。

7.Proxyを切って接続

　Proxyを無効にしてからmixiにアクセスしてください。正常に登録できていれば
Gmailのアドレスと先ほど登録したときのパスワードでログインできると思います。
これ以降はProxyは通さなくても自由にログインできます。


■0x08.) おわりに

　いかがでしたか？　「そんな情報知ってるよ！」と思われた方も多いと存じま
すが、今回のレポートを通して、どのようなシステムにも脆弱性が存在している
ことを実感していただければ幸いです。その脆弱性が仕様レベルなのか、OSによ
るものなのか、はたまたハードウェアに依存するものなのかはそれぞれでしょう
が、ありとあらゆるシステムには脆弱性があります。今回はmixiという例をとっ
て仕様における脆弱性を見てきました。
　それでは、またお会いしましょう。



